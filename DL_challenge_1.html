---
layout: challenge
title: Challenge level 1
permalink: /DL/challenge1
---


    <!-- Intro to challenge -->
<section id="portfolio-work" style= "background-image: url({{ site.baseurl }}/img/DL-ccbanner-gold.png); color: white">

        <div class="container">
         <center><h2>Intro to R challenge: Where are the red squirrels? </h2></center>
            <p></p>
         <center> <p> This challenge will require the use of data manipulation, plotting and linear modelling skills, and is the culmination of the <a href="https://ourcodingclub.github.io/course/stats-scratch.html" target="_blank" style="color: #e6e7eb;"><i>STATS FROM SCRATCH</i></a> course stream. Scroll for more information on your tasks and how to complete the challenge. </p></center>
        
</div>

</section>

<!-- Challenge context and objectives -->
<section id="challenge1intro" class="feature">
 
   <div class="container">
      <btn-switch onclick="toggle(challenge1intro)" style="float: right;"> Hide/show background </btn-switch> 
  <div class="row">
    <div class="col-md-6">
      <h2>Challenge outline and objectives</h2>
      <p> Red squirrels, once widespread throughout the UK, have declined sharply in the last century following the introduction of grey squirrels from North America. Most of the remaining populations are now restricted to parts of Scotland, and still threatened by the expansion of grey squirrels, which are more competitive and carry the deadly squirrel pox. </p> 
     
     <p> Red squirrels are a protected species and, with conservation efforts from <a href="https://scottishsquirrels.org.uk/" target="_blank">dedicated organisations</a>, are able to maintain strongholds in various parts of Scotland. These organisations also collect information on red and grey squirrel sightings, and we will use these data in the challenge to learn more about red squirrel population trends and habitat preferences.</p>
    </div>
  </div>
</div>
</section>


<!-- Data section -->
<section id="portfolio-work" style= "background-color: #4d6b54; color: white">

        <div class="container">
         <center><h2>Data overview </h2></center>
         
          <h4> You will use the following datasets, available from the <a href="https://github.com/ourcodingclub/CC_course_challenge1" target="_blank">Challenge repository</a>: <br> </h4>
          
          <b><h3>The Scottish Squirrel Database</h3></b>

          <p><b>squirrels.csv:</b> A dataset of grey and red squirrel observations compiled by the <a href="http://scottishwildlifetrust.org.uk/" target="_blank">Scottish Wildlife Trust</a> and hosted on the <a href="https://registry.nbnatlas.org/public/show/dr949" target="_blank">NBN Atlas</a>. The most relevant variables in the dataset for this challenge are:</p>
          <li><b>Year:</b> the year of the sighting</li>
          <li><b>Count:</b> the number of squirrels sighted on the occasion (if blank, assume it is 1)</li>
          <li><b>OSGR:</b> the Ordnance Survey <a href="https://getoutside.ordnancesurvey.co.uk/guides/beginners-guide-to-grid-references/" target="_blank">grid reference</a> for 10 x 10 km squares; will be useful to link the forest cover data</li>

          
          <b><h3>Forest cover</h3></b>

      <p><b>forestcoverOS.csv:</b> This dataset contains the forest cover (in % and total area) in each OS grid cell. This dataset was created by us*, using: </p>

<li>	<b>The National Forest Inventory for Scotland 2017</b>, from the <a href="http://data-forestry.opendata.arcgis.com/datasets/3cb1abc185a247a48b9d53e4c4a8be87_0/" target="_blank">Forestry Commission</a></li>

<li>	<b>OS grid cells at a 10 x 10 km resolution</b>, from <a href="https://github.com/charlesroper/OSGB_Grids" target="_blank">this Git repository</a></li>

<p>*<i>Fancy a more advanced challenge? Why don't you try re-creating this dataset yourself?</i> (Best suited to someone with notions of spatial analysis: all you have to do is intersect the files and extract the area.)</p>
        
</div>

</section>

   <!-- Tasks -->

<!-- Step 1 clean -->   
<section id="portfolio-work" style= "background-color: #d1b375; color: #2b3138">

        <div class="container">
           
   <center><h2>Specific tasks </h2></center>
      
      <p>Here is a detailed list of the tasks you should achieve within this challenge. Remember that a challenge is meant to be, well, challenging, and therefore we are setting you goals but the choice of workflow and functions to achieve them is up to you! We also list the questions that will be asked in the quiz at the end to confirm your successful completion - we suggest you take note of your answers as you go.</p>

   <div class="row-eq-height">
      <div class="col-md-9 col-sm-12">
        <div class="block">        
   <h3><b>1. Data manipulation </b></h3>
   
      
<p>Clean the squirrel dataset for the last decade, so it’s ready to analyse. Specifically, you should: </p>

<li>Keep only observations for the years 2008 to 2017 (using the <i>Start.date.year column</i> and renaming it to <i>year</i>)</li>

<li>Remove the observations that are not at the species level (i.e. we don’t know whether they are grey or red squirrels)</li>

<li>Create a <i>species</i> column that will have <i>Red</i> and <i>Grey</i> as factor levels </li>

<li>We will assume that the observations that have <b>NA</b> as <i>count</i> are observations of one squirrel; replace them by the value 1. </li><br>

<p><b>Be prepared to answer the question: </b></p>

<li>To the nearest thousand, how large is your <b>cleaned</b> dataset? </li> <br>

        </div>
      </div>
      
   <div class="col-md-3 col-sm-12">
      <div class="profile" style="border: 0px;">
        <center><img src="{{ site.baseurl }}/img/DL/acorn.png" style= "height:280px; width:auto; vertical-align:  middle" alt="acorn-icon"></center>
       </div>
   </div>
      
   </div>
   
</div>
</section>


<!-- Step 2 temporal trends -->   
<section id="portfolio-work" style= "background-color: #fbfbfc; color: #2b3138">

        <div class="container">

<div class="row-eq-height">
   
   <div class="col-md-4 col-sm-12">
      <div class="profile" style="border: 0px;">
        <img src="{{ site.baseurl }}/img/DL/temporal.png" style= "height:280px; width:auto;  vertical-align:middle" alt="temp-trend">
       </div>
   </div>
   
      <div class="col-md-8 col-sm-12">
        <div class="block">           
   <h3> <b>2. Temporal trends </b><br></h3>
      
<p>Determine if there is a temporal trend in the number of observations for red and grey squirrels (2008-2017). Specifically, you should:</p>

<li> Summarise the number of observations <i>per species and per year</i>. (That means a total number of red vs grey squirrels for each year.) A more complex analysis would also account for spatial autocorrelation and other factors, but as a preliminary analysis you are only asked to consider the total numbers at the national scale. </li>      

<li>Plot the data and run <b>one linear model</b> to test the question <i>Have squirrel populations increased or decreased over time, and is the trend the same for red and grey squirrels?</i></li>

<p><b>Be prepared to answer the questions: </b></p>
<li> Which species showed the strongest change over time? </li>
<li> What were your predictor variable(s) and their data type in the model?</li>
<li> What is the adjusted R-squared of the regression? </li>
<li> Considering the nature of our response variable, what modelling approach would be the most appropriate? (Don't worry if you only ran a linear regression! It's a justifiable approach for a preliminary analysis, and for such large numbers the results will be similar.) </li>
         <br>
         
<p><b> Think about the following:</b> what could be the reasons for this trend? Is it ecologically meaningful? Are there any biases in the data to be aware of?</p>

         </div>
      </div>

</div>
</div>
</section>


<!-- Step 3 habitat -->   
<section id="portfolio-work" style= "background-color: #a7764a; color: white">

        <div class="container">

<div class="row-eq-height">
   
  
   <div class="col-md-7 col-sm-12">
        <div class="block">          

   <h3> <b>3. Do red and grey squirrels prefer different habitats? </b><br></h3>
      
<p>We usually think of grey squirrels as city dwellers, while red squirrels require extensive forest cover. Determine whether recent squirrel counts in OS grid cells (10km) are linked to forest cover in that cell. Specifically, you should: </p>

<li> Filter the data to the period covering 2015-2017. Summarise the squirrel count data at the <i>species</i> and <i>grid cell</i> level. (You can sum counts across years; this is not ideal but since we're only dealing with a few years of data this will give us a population index that allows for inconsistent sampling across years, hopefully without double-counting too much.) Remove observations greater than 300, as they mess up with the plots later (but feel free to experiment with different subsets!).</li>    

<li>Merge the squirrel and forest datasets </li> 

<li>Visualise the scatterplot of abundance as a function of forest cover for each species. Run one linear model (bonus: try a glm with the appropriate distribution) to test the relationship. </li><br>

<p><b>Be prepared to answer the questions: </b></p>
<li> Are red squirrels significantly associated with forested areas? </li>
<li> Does the model explain the variation in the data well?</li><br>

         </div>
   </div>
          <div class="col-md-5 col-sm-12">
               <div class="profile" style="border: 0px;">
       <img src="{{ site.baseurl }}/img/DL/habitat.png" style= "height:270px; width:auto; vertical-align:  middle" alt="house-img">
               </div>
         </div>


</div>
</div>
</section>         


<!-- Step 4 reclassify -->   
<section id="portfolio-work" style= "background-color: #fbfbfc; color: #2b3138">

        <div class="container">

<div class="row-eq-height">
   
    <div class="col-md-4 col-sm-12">
      <div class="profile" style="border: 0px;">
        <img src="{{ site.baseurl }}/img/DL/mosaic.png" style= "height:320px; width:auto; vertical-align:  middle" alt="temp-trend">
       </div>
   </div>

   <div class="col-md-8 col-sm-12">
        <div class="block">            
         
 <h3> <b>4. Re-classify forest cover </b><br></h3>         
         
<p>Building on the previous point, try turning the forest cover data into a categorical variable, and use the visual representation of your choice to display the median abundance of grey and red squirrels in these classes, and the uncertainty around these measures. Specifically, you should:</p> 

<li>	Transform the cover data into a <i>cover.class</i> variable with the following bins:
<ul>
<li>o 0-10 % </li>
<li>o	10-20 %</li>
<li>o	20-30 %</li>
<li>o	30-40 %</li>
<li>o	40-50 %</li>
<li>o	50+ %</li>

</ul>
         </li>
         
<li>	Create your visualisation</li><br>

<p><b>Be prepared to answer the question:</b></p> 
<li>In what cover classes are red squirrels more abundant than the grey?</li>


 </div>
   </div>
      
         
</div>
</div>
</section>

<!-- Get started  -->
<section id="challenge1test" class="feature">
 
   <div class="container">
      <btn-switch onclick="toggle(challenge1test)" style="float: right;"> Hide/show background </btn-switch> 
  <div class="row">
    <div class="col-md-5 col-md-offset-7">
      <h2>How to get started </h2>
      <p> Download the <a href="https://github.com/ourcodingclub/CC_course_challenge1" target="_blank">challenge repository</a>, which contains all the data you need, and create a new script for your challenge. Refer to this page to make sure you are answering all the questions. 
There is no script or code provided for this challenge: how you go about solving the tasks is entirely up to you! You may want to refer to the tutorials listed below (and other online resources). </p>

<h2> Finished? Take the test! </h2>
<p> Once you have a fully working script and have completed the specific tasks, take the test. </p>
<a class="button" href=" INSERT LINK" target="_blank" style="background-color:#2f2b2b; padding:20px; border-radius:5px">Feature coming soon</a>     
      
    </div>
  </div>
</div>
</section>
   
<!-- Help section -->
<section id="portfolio-work" style= "background-color: #515d69; color: white">

        <div class="container">
         <center><h2>Help & hints </h2></center>
   <p>Here is a list of tutorials that might help you complete this challenge: </p>

<li><a href="https://ourcodingclub.github.io/2017/01/06/data-manip-intro.html" target="_blank">Data manipulation 1 </a> </li>
<li> <a href="https://ourcodingclub.github.io/2017/01/29/datavis.html" target="_blank">Data visualisation 1 </a> </li>
<li><a href="https://ourcodingclub.github.io/2017/02/28/modelling.html" target="_blank">From distributions to linear models</a></li>


<h3> Need a hint? Just click on a question to expand. </h3>

   <details markdown="1">
      <summary markdown= "span"> 
   <big>How do I remove unwanted data points? </big></summary>

<p>You can specify a variety of <a href="https://ourcodingclub.github.io/2017/01/06/data-manip-intro.html#logic" target="_blank">logical statements</a> in the the <code>filter</code> function from <code>dplyr</code>. </p>

   </details> 
   
         <br>
         
   <details markdown="1">
      <summary markdown= "span"> 
   <big>I can't figure out how to replace NA values with something else. </big></summary>

<p>NA values are something special in R, and there are special functions to handle them. Take a look at the <code>is.na()</code> logical function, and see if you can use it within a<code>mutate</code> call to create a new column based on existing values.</p>

<p>You'll want mutate to replace the value in a cell <i>IF</i> the original value was one, and <i>ELSE</i> you'll want to keep the original value. Oh, hey, do you know the <code>ifelse()</code> function?</p>
   </details> 
 
 <br>
 

<p>We love getting your feedback, and will add more hints to this section if you get in touch and tell us where you struggled in this challenge!</p>        
         </div>
</section>

   
<!-- Acknowledgements section -->
<section id="portfolio-work" style= "background-color: #484b49; color: white">

        <div class="container">
         <center><h2>Acknowledgements </h2></center>
   <p>We thank all the organisations that provided open access data for this challenge. The datasets licences are as follow: </p>

<li><b>Scottish Wildlife Trust (2018).</b> The Scottish Squirrel Database. Occurrence dataset https://doi.org/10.15468/fqg0h3 under license CC-BY-4.0</li><br>

<li><b>Forestry Commission (2018). </b>National Forest Inventory Woodland Scotland 2017. Available on <a href="http://data-forestry.opendata.arcgis.com/datasets/3cb1abc185a247a48b9d53e4c4a8be87_0/" target="_blank">Forestry Commission Open Data portal</a> under Open Governement licence: Crown copyright and database right 2018 Ordnance Survey [100021242]</li><br>

<li><b>Charles Roper (2015).</b>OSGB Grids in shapefile format. Available on <a href="https://github.com/charlesroper/OSGB_Grids" target="_blank">GitHub</a> under a CC-0 (public domain) license.</li>

         </div>
</section>

<!-- Back to course home  -->
 <section id="backhome">
        <div class="container">
         
         <center> <a class="btn" href="https://ourcodingclub.github.io/course_home">   <h3> Back to course home </h3> </a></center>

         </div>
</section>

   